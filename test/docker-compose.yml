version: '3.8'

# Define common environment variables
x-environment: &db-credentials
  MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
  MYSQL_DATABASE: ${MYSQL_DATABASE}
  MYSQL_USER: ${MYSQL_USER}
  MYSQL_PASSWORD: ${MYSQL_PASSWORD}

services:
  deep-maria-db:
    image: mariadb:11.4
    container_name: deep-maria-db
    environment: *db-credentials
    volumes:
      - ${MARIADB_CONFIG_PATH:-../mariadb/conf.d}:/etc/mysql
    networks:
      - deep-maria-net

  deep-maria-app:
    image: python:3
    container_name: deep-maria-app
    environment: *db-credentials
    volumes:
      - ${PYTHON_APP_PATH:-../python}:/app
    working_dir: /app
    networks:
      - deep-maria-net
    command: tail -f /dev/null

networks:
  deep-maria-net:
    driver: bridge
